---
title: Self-hosting ClassroomIO
description: Guide to self-hosting ClassroomIO on your own servers.
---

import { Callout } from 'fumadocs-ui/components/callout';
import { Step, Steps } from 'fumadocs-ui/components/steps';

This guide will help you quickly self-host ClassroomIO.

![Selfhost ClassroomIO](/selfhost-classroomio.webp)

ClassroomIO is made up of the following applications:

- [apps/api](https://github.com/rotimi-best/classroomio/tree/main/apps/api) - an Express server
- [apps/dashboard](https://github.com/rotimi-best/classroomio/tree/main/apps/dashboard) - the admin dashboard + LMS
- [packages/db](https://github.com/rotimi-best/classroomio/tree/main/packages/db) - shared database layer for PostgreSQL

The quickest and easiest way to deploy both the api and dashboard is by using our [Railway Template](https://railway.app/template/dl9RG7?referralCode=8OyIj5). However there are a couple of things that you'd need first before heading over to the template, which are:

1. SMTP values - For sending emails on the api
2. PostgreSQL + Redis - For the API and database layer
3. Cloudflare R2 (optional) - Video uploads on the API

## SMTP Setup

You need a custom SMTP configuration for email sending. Most importantly you need these values:

```zsh title="env"
SMTP_HOST=
SMTP_PORT=
SMTP_USER=
SMTP_PASSWORD=
SMTP_SENDER=
```

Make sure you have them handy because you'd need them while we go through this self-hosting guide.

<Callout title="Learn More">
  Learn more about setting up a custom SMTP server
  [here](https://nodemailer.com/smtp/)
</Callout>

## PostgreSQL + Redis

ClassroomIO now runs directly on PostgreSQL and Redis (no Supabase dependency in Docker setup).

For deployments, keep these connection variables ready:

```zsh title="env"
DATABASE_URL=
PRIVATE_DATABASE_URL=
REDIS_URL=
```

## Cloudflare R2

We use Cloudflare R2 for video uploading within the course builder. It is not required though and you can do without it in the app if you don't need video upload.

<Callout title="Work in Progress">This section is a work in progress.</Callout>

## Deploy on Railway

Now you have everything you need and you are ready to deploy the api and dashboard.

Go ahead and click this button to get started.

[![Deploy on Railway](https://railway.app/button.svg)](https://railway.app/template/dl9RG7?referralCode=8OyIj5)

### Environment Variables

#### cio-api

```zsh title="env"
# Required
DATABASE_URL=""
PRIVATE_DATABASE_URL=""
REDIS_URL=""
SERVER_URL=""
TRUSTED_ORIGINS=""
BETTER_AUTH_SECRET=""
AUTH_BEARER_TOKEN=""
SMTP_HOST=""
SMTP_PORT=""
SMTP_USER=""
SMTP_SENDER=""
SMTP_PASSWORD=""

# Optional
CLOUDFLARE_BUCKET_ID=""
CLOUDFLARE_ACCESS_KEY=""
CLOUDFLARE_ACCOUNT_ID=""
CLOUDFLARE_BUCKET_DOMAIN=""
CLOUDFLARE_SECRET_ACCESS_KEY=""
SENTRY_DNS=""
```

<Callout title="Learn More">
  Learn more about the environment variables
  [here](https://github.com/rotimi-best/classroomio/blob/main/apps/api/.env.example)
</Callout>

#### cio-dashboard

```zsh title="env"
# Required
PUBLIC_SERVER_URL=""
PRIVATE_SERVER_KEY=""
PUBLIC_IS_SELFHOSTED="true"

# Optional
OPENAI_API_KEY=""
PUBLIC_IP_REGISTRY_KEY=""
UNSPLASH_API_KEY=""
PRIVATE_APP_HOST=""
PRIVATE_APP_SUBDOMAINS=""
```

<Callout title="Important">
  Use the same value for `AUTH_BEARER_TOKEN` (API) and `PRIVATE_SERVER_KEY` (dashboard) so server-side dashboard API calls can authenticate.
</Callout>

<Callout title="Learn More">
  Learn more about the environment variables
  [here](https://github.com/rotimi-best/classroomio/blob/main/apps/dashboard/.env.example)
</Callout>

## Using Docker

We provide `docker/docker-compose.yaml` for local self-hosting.

The stack includes:

- `postgres` (database)
- `redis` (cache/rate-limit store)
- `db-init` (one-off DB setup)
- `api` (backend on `3081`)
- `dashboard` (frontend on `3082`)

1. Clone the repository:

```zsh title="Terminal"
git clone https://github.com/rotimi-best/classroomio.git
cd classroomio
```

2. Start the full stack:

```zsh title="Terminal"
./run-docker-full-stack.sh
```

3. Verify services:

```zsh title="Terminal"
docker compose -p classroomio -f docker/docker-compose.yaml ps
curl -sS http://localhost:3081/
curl -I http://localhost:3082/
```

The services will be available at:

- Dashboard: http://localhost:3082
- API: http://localhost:3081

### API-Only Smoke Test

If you want to validate API startup first:

```zsh title="Terminal"
docker compose -p classroomio -f docker/docker-compose.yaml up --build -d postgres redis db-init api
docker compose -p classroomio -f docker/docker-compose.yaml logs --tail=100 api
curl -sS http://localhost:3081/
```

### Environment Variables for Docker

Local defaults are provided in compose, but set these for real deployments:

```zsh title="env"
POSTGRES_DB=classroomio
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres

BETTER_AUTH_SECRET=
AUTH_BEARER_TOKEN=
PRIVATE_SERVER_KEY=

SERVER_URL=
PUBLIC_SERVER_URL=
TRUSTED_ORIGINS=
```

<Callout title="Important">
  `run-docker-full-stack.sh` auto-generates secure values for `AUTH_BEARER_TOKEN` and
  `PRIVATE_SERVER_KEY` when missing/insecure, and keeps both values synchronized so dashboard
  server-side calls can authenticate with the API.
</Callout>
