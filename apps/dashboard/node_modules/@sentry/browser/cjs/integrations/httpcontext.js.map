{"version":3,"file":"httpcontext.js","sources":["../../../../src/integrations/httpcontext.ts"],"sourcesContent":["import { addGlobalEventProcessor, getCurrentHub } from '@sentry/core';\nimport type { Event, Integration } from '@sentry/types';\n\nimport { WINDOW } from '../helpers';\n\n/** HttpContext integration collects information about HTTP request headers */\nexport class HttpContext implements Integration {\n  /**\n   * @inheritDoc\n   */\n  public static id: string = 'HttpContext';\n\n  /**\n   * @inheritDoc\n   */\n  public name: string = HttpContext.id;\n\n  /**\n   * @inheritDoc\n   */\n  public setupOnce(): void {\n    addGlobalEventProcessor((event: Event) => {\n      if (getCurrentHub().getIntegration(HttpContext)) {\n        // if none of the information we want exists, don't bother\n        if (!WINDOW.navigator && !WINDOW.location && !WINDOW.document) {\n          return event;\n        }\n\n        // grab as much info as exists and add it to the event\n        const url = (event.request && event.request.url) || (WINDOW.location && WINDOW.location.href);\n        const { referrer } = WINDOW.document || {};\n        const { userAgent } = WINDOW.navigator || {};\n\n        const headers = {\n          ...(event.request && event.request.headers),\n          ...(referrer && { Referer: referrer }),\n          ...(userAgent && { 'User-Agent': userAgent }),\n        };\n        const request = { ...event.request, ...(url && { url }), headers };\n\n        return { ...event, request };\n      }\n      return event;\n    });\n  }\n}\n"],"names":["addGlobalEventProcessor","getCurrentHub","WINDOW"],"mappings":";;;;;AAKA;AACA,MAAA,WAAA,EAAA,CAAA,WAAA,GAAA,EAAA,WAAA,CAAA,SAAA,CAAA,MAAA,CAAA,IAAA,CAAA,IAAA,CAAA,CAAA,EAAA;AACA;AACA;AACA;AACA,GAAA,OAAA,YAAA,GAAA,CAAA,IAAA,CAAA,EAAA,GAAA,cAAA,CAAA;AACA;AACA;AACA;AACA;AACA,GAAA,MAAA,GAAA,CAAA,IAAA,CAAA,IAAA,GAAA,WAAA,CAAA,GAAA,CAAA;AACA;AACA;AACA;AACA;AACA,GAAA,SAAA,GAAA;AACA,IAAAA,4BAAA,CAAA,CAAA,KAAA,KAAA;AACA,MAAA,IAAAC,kBAAA,EAAA,CAAA,cAAA,CAAA,WAAA,CAAA,EAAA;AACA;AACA,QAAA,IAAA,CAAAC,cAAA,CAAA,SAAA,IAAA,CAAAA,cAAA,CAAA,QAAA,IAAA,CAAAA,cAAA,CAAA,QAAA,EAAA;AACA,UAAA,OAAA,KAAA,CAAA;AACA,SAAA;AACA;AACA;AACA,QAAA,MAAA,GAAA,GAAA,CAAA,KAAA,CAAA,OAAA,IAAA,KAAA,CAAA,OAAA,CAAA,GAAA,MAAAA,cAAA,CAAA,QAAA,IAAAA,cAAA,CAAA,QAAA,CAAA,IAAA,CAAA,CAAA;AACA,QAAA,MAAA,EAAA,QAAA,EAAA,GAAAA,cAAA,CAAA,QAAA,IAAA,EAAA,CAAA;AACA,QAAA,MAAA,EAAA,SAAA,EAAA,GAAAA,cAAA,CAAA,SAAA,IAAA,EAAA,CAAA;AACA;AACA,QAAA,MAAA,OAAA,GAAA;AACA,UAAA,IAAA,KAAA,CAAA,OAAA,IAAA,KAAA,CAAA,OAAA,CAAA,OAAA,CAAA;AACA,UAAA,IAAA,QAAA,IAAA,EAAA,OAAA,EAAA,QAAA,EAAA,CAAA;AACA,UAAA,IAAA,SAAA,IAAA,EAAA,YAAA,EAAA,SAAA,EAAA,CAAA;AACA,SAAA,CAAA;AACA,QAAA,MAAA,OAAA,GAAA,EAAA,GAAA,KAAA,CAAA,OAAA,EAAA,IAAA,GAAA,IAAA,EAAA,GAAA,EAAA,CAAA,EAAA,OAAA,EAAA,CAAA;AACA;AACA,QAAA,OAAA,EAAA,GAAA,KAAA,EAAA,OAAA,EAAA,CAAA;AACA,OAAA;AACA,MAAA,OAAA,KAAA,CAAA;AACA,KAAA,CAAA,CAAA;AACA,GAAA;AACA,CAAA,CAAA,WAAA,CAAA,YAAA,EAAA;;;;"}